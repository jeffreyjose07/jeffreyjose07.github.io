<!DOCTYPE html>
<html>
<head>
    <title>VOID BLOCKS Debug</title>
    <style>
        body { margin: 0; background: #000011; font-family: Monaco, monospace; color: #55ff55; }
        canvas { border: 2px solid #55ffff; }
        #debug { position: absolute; top: 10px; left: 10px; z-index: 1000; }
    </style>
</head>
<body>
    <div id="debug">
        <div>LittleJS Loading Status: <span id="status">Loading...</span></div>
        <div>Canvas Size: <span id="canvasSize">Unknown</span></div>
        <div>drawText Function: <span id="drawTextStatus">Unknown</span></div>
        <button onclick="testDrawText()">Test drawText</button>
        <button onclick="testColors()">Test Colors</button>
        <div id="logs"></div>
    </div>
    
    <canvas></canvas>
    
    <script src="./littlejs.min.js"></script>
    <script>
        let debugLog = document.getElementById('logs');
        let gameStarted = false;
        
        function log(msg) {
            debugLog.innerHTML += '<div>' + msg + '</div>';
            console.log(msg);
        }
        
        function testDrawText() {
            if (!gameStarted) {
                log('Game not initialized yet!');
                return;
            }
            log('Testing drawText manually...');
            const color = new Color(1, 1, 1, 1);
            drawText('MANUAL TEST', vec2(400, 100), 32, color);
        }
        
        function testColors() {
            if (!gameStarted) {
                log('Game not initialized yet!');
                return;
            }
            log('Testing different colors...');
            drawText('RED', vec2(200, 200), 16, new Color(1, 0, 0, 1));
            drawText('GREEN', vec2(400, 200), 16, new Color(0, 1, 0, 1));
            drawText('BLUE', vec2(600, 200), 16, new Color(0, 0, 1, 1));
        }
        
        function gameInit() {
            setCameraScale(1);
            setCanvasSize(vec2(800, 600));
            
            document.getElementById('status').textContent = 'Initialized';
            document.getElementById('canvasSize').textContent = '800x600';
            document.getElementById('drawTextStatus').textContent = typeof drawText;
            
            gameStarted = true;
            log('Game initialized successfully');
            log('drawText function type: ' + typeof drawText);
            log('vec2 function type: ' + typeof vec2);
            log('Color function type: ' + typeof Color);
        }
        
        function gameUpdate() {}
        function gameUpdatePost() {}
        
        function gameRender() {
            // Draw background
            const bgColor = new Color(0, 0, 0.07, 1);
            drawRect(vec2(400, 300), vec2(800, 600), bgColor);
        }
        
        function gameRenderPost() {
            // Test basic text rendering
            try {
                const white = new Color(1, 1, 1, 1);
                const green = new Color(0.2, 1, 0.2, 1);
                const cyan = new Color(0.2, 1, 1, 1);
                
                // LittleJS drawText signature: drawText(text, pos, size, color, outlineWidth, outlineColor, textAlign, font, maxWidth, context)
                drawText('VOID BLOCKS DEBUG', vec2(400, 50), 24, cyan, 0, undefined, 'center');
                drawText('Frame: ' + frameCount, vec2(400, 100), 16, white, 0, undefined, 'center');
                drawText('Time: ' + time.toFixed(2), vec2(400, 130), 16, green, 0, undefined, 'center');
                
                // Test different positions
                drawText('TOP LEFT', vec2(100, 100), 14, green, 0, undefined, 'center');
                drawText('TOP RIGHT', vec2(700, 100), 14, green, 0, undefined, 'center');
                drawText('BOTTOM LEFT', vec2(100, 500), 14, green, 0, undefined, 'center');
                drawText('BOTTOM RIGHT', vec2(700, 500), 14, green, 0, undefined, 'center');
                drawText('CENTER', vec2(400, 300), 20, cyan, 0, undefined, 'center');
                
            } catch (error) {
                log('Error in gameRenderPost: ' + error.message);
            }
        }
        
        // Wait for LittleJS to load
        function waitForLittleJS() {
            if (typeof engineInit !== 'undefined') {
                log('LittleJS loaded, initializing...');
                engineInit(gameInit, gameUpdate, gameUpdatePost, gameRender, gameRenderPost);
            } else {
                log('Waiting for LittleJS...');
                setTimeout(waitForLittleJS, 100);
            }
        }
        
        waitForLittleJS();
    </script>
</body>
</html>